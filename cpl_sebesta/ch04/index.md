# 4. Λεκτική και συντακτική ανάλυση

* Λεκτικός αναλυτής 
* Συντακτικός αναλυτής
* Συντακτική ανάλυση
  * Συντακτική ανάλυση από πάνω προς τα κάτω (αναδρομική κατάβαση)
  * Συντακτική ανάλυση από κάτω προς τα πάνω (συντακτική ανάλυση LR)

## 4.1 Εισαγωγή

* Ο συντακτικός αναλυτής είναι βασικό τμήμα του μεταγλωττιστή καθώς άλλα τμήματα του μεταγλωττιστή όπως ο σημασιολογικός αναλυτής και η γεννήτρια κώδικα καθοδηγούνται από τις ενέργειες του συντακτικού αναλυτή.
* Συνηθισμένος τρόπος περιγραφής του συντακτικού μιας γλώσσας είναι οι γραμματικές χωρίς συμφραζόμενα (CFG). Η περιγραφή του συντακτικού συνήθως γίνεται κάνοντας χρήση του συμβολισμού BNF.
* Η πλειονότητα των μεταγλωττιστών χωρίζουν το έργο της συντακτικής ανάλυσης σε δύο διακριτά μέρη, τη **λεκτική ανάλυση** και την καθ' αυτό **συντακτική ανάλυση**.  Οι λόγοι για το διαχωρισμό της λεκτικής ανάλυσης από τη συντακτική ανάλυση είναι:
  * Απλότητα - Οι τεχνικές λεκτικής ανάλυσης είναι απλούστερες από τις τεχνικές συντακτικής ανάλυσης.
  * Αποδοτικότητα - Βελτιστοποιήσεις μπορούν να γίνουν ξεχωριστά είτε στο λεκτικό αναλυτή είτε στο συντακτικό αναλυτή.
  * Μεταφερσιμότητα - Ο λεκτικός αναλυτής μπορεί να εξαρτάται από την πλατφόρμα εκτέλεσης (ανάγνωση αρχείων, προσωρινή αποθήκευση εισόδου) αφήνοντας το συντακτικό αναλυτή ανεξάρτητο πλατφόρμας.

## 4.2 Λεκτική ανάλυση

* Ο λεκτικός αναλυτής αποτελεί μέρος της συντακτικής ανάλυσης.
* Ο λεκτικός αναλυτής ουσιαστικά είναι ένας μηχανισμός αντιστοίχισης μοτίβων. Εντοπίζει συμβολοσειρές στο πηγαίο κώδικα που ονομάζονται λεξήματα (lexems) και τις αντιστοιχεί σε κατηγορίες που ονομάζονται λεκτικές μονάδες (tokens). Για παράδειγμα:

    ```
    result = oldsum - value / 100;
    ```

    | Λεκτική μονάδα | Λέξημα |
    | -------------- | ------ |
    | IDENTIFIER     | result |
    | ASSIGN_OP      | =      |
    | IDENTIFIER     | oldsum |
    | SUB_OP         | -      |
    | IDENTIFIER     | value  |
    | DIV_OP         | /      |
    | INT_LITERAL    | 100    |
    | SEMICOLON      | ;      |

* Οι περισσότεροι λεκτικοί αναλυτές είναι υποπρογράμματα που καλούνται από το συντακτικό αναλυτή, εντοπίζουν το επόμενο λέξημα στην είσοδο και επιστρέφουν το λέξημα και τη λεκτική μονάδα στην οποία ανήκει.
* Ο λεκτικός αναλυτής εντοπίζει ενδεχόμενα σφάλματα σε λεξήματα (π.χ. λάθος μορφοποίηση τιμής κινητής υποδιαστολής).

Υπάρχουν 3 βασικές προσεγγίσεις για τη κατασκευή ενός λεκτικού αναλυτή:

1. Χρησιμοποιώντας το flex ή παρόμοιο παράγουμε αυτόματα έναν λεκτικό αναλυτή, δίνοντας ως είσοδο κανονικές εκφράσεις που περιγράφουν τις λεκτικές μονάδες της γλώσσας.
2. Σχεδιάζουμε ένα διάγραμμα καταστάσεων που περιγράφει τα μοτίβα λεκτικών μονάδων της γλώσσας και γράφουμε ένα πρόγραμμα που υλοποιεί το διάγραμμα.
3. Σχεδιάζουμε ένα διάγραμμα καταστάσεων που περιγράφει τα μοτίβα λεκτικών μονάδων της γλώσσας και γράφουμε ένα πρόγραμμα που υλοποιεί το διάγραμμα και η οποία βασίζεται σε πίνακα.


Τα διαγράμματα καταστάσεων που χρησιμοποιούν οι λεκτικοί αναλυτές αναπαριστούν μια συγκεκριμένη κατηγορία υπολογιστικών μηχανών που ονομάζονται **πεπερασμένα αυτόματα**. Τα πεπερασμένα αυτόματα μπορούν να αναγνωρίζουν τα μέλη μιας κατηγορίας γλωσσών που ονομάζονται **κανονικές γλώσσες**.

### Παράδειγμα λεκτικού αναλυτή

Λεκτικός αναλυτής που αναγνωρίζει μόνο αριθμητικές εκφράσεις, συμπεριλαμβανομένων ονομάτων μεταβλητών και ακεραίων τιμών ως τελεστέους.

* [front.c](./../../pl/c/front.c)

## 4.3 Το πρόβλημα της συντακτικής ανάλυσης

Οι δύο βασικές κατηγορίες αλγορίθμων συντακτικής ανάλυσης είναι η συντακτική ανάλυση από πάνω προς τα κάτω και η συντακτική ανάλυση από κάτω προς τα πάνω.

### 4.3.1 Εισαγωγή στη συντακτική ανάλυση

Οι συντακτικοί αναλυτές κατασκευάζουν (πιθανά έμμεσα) δένδρα συντακτικής ανάλυσης (parse trees). Έμμεση κατασκευή σημαίνει ότι παράγονται μόνο οι διασχίσεις του δένδρου που χρειάζονται. Οι στόχοι της συντακτικής ανάλυσης είναι:
1. Έλεγχος συντακτικής ορθότητας, εμφάνιση μεγαλύτερου δυνατού αριθμού διαγνωστικών μηνυμάτων για σφάλματα που υπάρχουν στον κώδικα.
2. Παραγωγή δένδρου συντακτικής ανάλυσης που χρησιμοποιείται ως βάση για μετάφραση.

#### Συμβάσεις συμβολισμών

* Τερματικά σύμβολα: πεζά γράμματα
* Μη τερματικά σύμβολα: κεφαλαία γράμματα

### 4.3.2 Από πάνω προς τα κάτω συντακτικοί αναλυτές

Ένας συντακτικός αναλυτής από πάνω προς τα κάτω κατασκευάζει ένα δένδρο συντακτικής ανάλυσης προδιατεταγμένα (preorder), δηλαδή ξεκινώντας από τη ρίζα του δένδρου επισκέπτεται πρώτα τον κάθε κόμβο, μετά το αριστερό υποδένδρο του και μετά το δεξιό υποδένδρο του.

### 4.3.2 Από κάτω προς τα πάνω συντακτικοί αναλυτές

### 4.3.3 Η πολυπλοκότητα της συντακτικής ανάλυσης

Οι αλγόριθμοι που χρησιμοποιούνται στους μεταγλωττιστές που κυκλοφορούν έχουν πολυπλοκότητα O(n) έτσι ώστε να είναι γρήγοροι.