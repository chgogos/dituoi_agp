# 9. Υποπρογράμματα

[ΑΡΧΕΣ ΓΛΩΣΣΩΝ ΠΡΟΓΡΑΜΜΑΤΙΣΜΟΥ (R.W.Sebesta) - Κεφάλαιο 9](./../../resources/pl11ch9GR.pdf)

* Σχεδιασμός υποπρογραμμάτων
* Μέθοδοι μεταβίβασης παραμέτρων
* Τοπικά περιβάλλοντα αναφοράς
* Υπερφορτωμένα υποπρογράμματα
* Γενικά υποπρογράμματα
* Ψευδωνυμία
* Έμμεση κλήση υποπρογραμμάτων
* Κλειστότητες
* Συρρουτίνες

## 9.1 Εισαγωγή

Τα υποπρογράμματα αποτελούν αφαιρέσεις εργασιών. Οι λεπτομέρειες μιας διεργασίας αντικαθίστανται με μια κλήση ενός υποπρογράμματος. Έτσι διευκολύνεται η ανάγνωση του κώδικα, εξοικονομείται χώρος μνήμης και χρόνος κωδικοποίησης.

## 9.2 Βασικά στοιχεία υποπρογραμμάτων

### 9.2.1 Γενικά στοιχεία υποπρογραμμάτων

* Κάθε υποπρόγραμμα έχει ένα σημείο εισόδου.
* Μόνο ένα υποπρόγραμμα εκτελείται ανά πάσα στιγμή (δεν ισχύει στα ταυτόχρονα προγράμματα).
* Ο έλεγχος επιστρέφει στο πρόγραμμα που καλεί ένα υποπρόγραμμα όταν ολοκληρώνεται η κλήση του.

### 9.2.2 Βασικοί ορισμοί

Βασικά είδη υποπρογραμμάτων: διαδικασίες,  συναρτήσεις

**Κεφαλίδα υποπρογράμματος**

Η κεφαλίδα ενός υποπρογράμματος καθορίζει το είδος του, το όνομά του (αν έχει) και τη λίστα παραμέτρων του. 

**Σώμα υποπρογράμματος**

Το σώμα ενός υποπρογράμματος ορίζει τις ενέργειες που θα εκτελεί το υποπρόγραμμα.

**Ιδιαίτερες περιπτώσεις**

Στην Python οι ορισμοί def των συναρτήσεων είναι εκτελέσιμοι. Οπότε μπορεί να γραφεί κώδικας της μορφής:

```
x = 1
if x == 1:
    def foo():
        print("A")
else:
    def foo():
        print("B")
foo()
```

Η εκτέλεση του παραπάνω κώδικα θα εμφανίσει A

Στην Ruby αν και συνήθως οι μέθοδοι ορίζονται σε κλάσεις, ωστόσο μπορούν να οριστούν και εκτός κλάσεων οπότε θεωρούνται μέθοδοι της κλάσης Object.

Στην Lua οι συναρτήσεις είναι ανώνυμες, αλλά μπορούν να οριστούν με τέτοιο τρόπο που να τους αποδίδεται όνομα

```
function cube(x) return x * x * x end

```

ή 

```
cube = function(x) return x * x * x end

```

Το **πρωτόκολλο** ενός υποπρογράμματος περιέχει τον αριθμό των παραμέτρων, τη σειρά με την οποία παρατίθενται, τον τύπο τους και εάν πρόκειται για συνάρτηση τον τύπο επιστροφής της.

Στη C και στη C++ χρησιμοποιούνται τα πρωτότυπα συναρτήσεων που αποτελούν δηλώσεις συναρτήσεων πριν τον ορισμό τους.

### 9.2.3 Παράμετροι

Οι παράμετροι στην κεφαλίδα του υποπρογράμματος ονομάζονται τυπικές (formal) παράμετροι ή ορίσματα, ενώ οι παράμετροι στην κλήση του υποπρογράμματος ονομάζονται πραγματικές (actual) παράμετροι ή παράμετροι.

**Παράμετροι θέσης και παράμετροι λέξεων κλειδιών**

Παράδειγμα στην Python με παραμέτρους λέξεων κλειδιών

```
def fun(x, y, z):
    print(
        f"Το πρώτο όρισμα είναι {x}, το δεύτερο όρισμα είναι {y}, το τρίτο όρισμα είναι {z}"
    )


fun(1, 2, 3)
fun(x=1, y=2, z=3)
fun(y=2, x=1, z=3)
fun(1, z=3, y=2)
```

**Προκαθορισμένες (default) τιμές**

Σε γλώσσες όπως οι Python, Ruby, C++, PHP οι τυπικές παράμετροι μπορούν να έχουν προκαθορισμένες τιμές.

**Μεταβλητός αριθμός παραμέτρων**

Παράδειγμα στη C

<https://en.cppreference.com/w/c/variadic>

Παράδειγμα στην Python
```
def fun(*args, **kwargs):
    print(args)
    print(kwargs)


fun(1, 2, 3, a="data1", b="data2")
```

### 9.2.4 Διαδικασίες και συναρτήσεις

Μόνο κάποιες παλιότερες γλώσσες όπως η Ada, Pascal και Fortran υποστηρίζουν τις διαδικασίες. Οι διαδικασίες είναι συλλογές εντολές που ορίζουν υπολογισμούς που καθορίζονται με βάση τις παραμέτρους. Οι συναρτήσεις είναι μια αφαίρεση των μαθηματικών συναρτήσεων. Ωστόσο οι συναρτήσεις μπορούν να προκαλούν side-effects, δηλαδή να αλλάζουν τιμές παραμέτρων ή άλλων μεταβλητών που ορίζονται εκτός των συναρτήσεων.

<!-- ## 9.3 Ζητήματα σχεδιασμού για υποπρογράμματα

## 9.4 Τοπικά περιβάλλοντα αναφοράς

## 9.5 Μέθοδοι μεταβίβασης παραμέτρων

### 9.5.1 Μοντέλα σημασιολογίας μεταβίβασης παραμέτρων

### 9.5.2 Μοντέλα υλοποίησης μεταβίβασης παραμέτρων

#### 9.5.2.1 Μεταβίβαση κατά τιμή

#### 9.5.2.2 Μεταβίβαση κατά αποτέλεσμα

#### 9.5.2.3 Μεταβίβαση κατά τιμή και αποτέλεσμα

#### 9.5.2.4 Μεταβίβαση κατά αναφορά

#### 9.5.2.5 Μεταβίβαση κατά όνομα

### 9.5.3 Υλοποίηση μεθόδων μεταβίβασης παραμέτρων -->

### 9.5.4 Μέθοδοι μεταβίβασης παραμέτρων σε γνωστές γλώσσες


**C**

Μεταβίβαση με τιμή

Μεταβίβαση με αναφορά

**C++**

Μεταβίβαση με τιμή

Μεταβίβαση με αναφορά

**Java**

Μεταβίβαση με τιμή (προσομοίωση μεταβίβασης με αναφορά με χρήση αντικειμένων)

[Example1.java](./../../pl/java/call_by_value/Example1.java)

**Python**

Μεταβίβαση με τιμή (προσομοίωση μεταβίβασης με αναφορά με χρήση αντικειμένων)

[call_by_value.py](./../../pl/python/call_by_value.py)

<!-- ### 9.5.5 Έλεγχος τύπων παραμέτρων -->

### 9.5.6 Διατάξεις πολλαπλών διαστάσεων ως παράμετροι

Οι διατάξεις δύο διαστάσεων στη C είναι διατάξεις διατάξεων και αποθηκεύονται κατά γραμμές στη μνήμη.

Όταν ένας πίνακας μεταβιβάζεται ως παράμετρος, η τυπική παράμετρος θα πρέπει να περιλαμβάνει το πλήθος των στηλών στο δεύτερο ζεύγος αγκυλών.

<!-- ## 9.6 Παράμετροι που είναι υποπρογράμματα

## 9.7 Έμμεση κλήση υποπρογραμμάτων

## 9.8 Ζητήματα σχεδιασμού για συναρτήσεις

## 9.9. Υπερφορτωμένα υποπρογράμματα -->

## 9.10 Γενικά υποπρογράμματα

### 9.10.1 Γενικές συναρτήσεις στη C++

Οι γενικές συναρτήσεις στη C++ ονομάζονται πρότυπες συναρτήσεις.

* [template1.cpp](./../../pl/cpp/template1.cpp)

<!-- ### 9.10.2 Γενικές συναρτήσεις στη Java

## 9.11 Υπερφορτωμένοι τελεστές που ορίζει ο χρήστης

## 9.12 Κλειστότητα

## 9.13 Συρρουτίνες -->
