# Google OR-Tools

Το OR-Tools της Google είναι ένα λογισμικό ανοικτού κώδικα για βελτιστοποίηση. Είναι σε θέση να επιλύσει προβλήματα δρομολόγησης οχημάτων, ροών, ακέραιου και γραμμικού προγραμματισμού, και προγραμματισμού με περιορισμούς.

Το πρόβλημα προς επίλυση μοντελοποιείται σε C++, Python, C# ή Java και στη συνέχεια χρησιμοποιείται κάποιος  εμπορικός επιλυτής (π.χ. Gurobi, CPLEX), ή κάποιος επιλυτής ανοικτού κώδικα (π.χ. CBC, SCIP, GLPK, Google GLOP, Google CP-SAT) για την επίλυσή του.

Παραδείγματα προβλημάτων που επιλύει το OR-Tools

* Δρομολόγηση οχημάτων (Vehicle Routing)
* Χρονοπρογραμματισμού (Scheduling)
* Πακετοποίησης (Bin Packing)

Τα προβλήματα που επιλύονται είναι προβλήματα συνδυαστικής βελτιστοποίησης για τα οποία προκύπτει ένα τεράστιο πλήθος πιθανών λύσεων που δεν είναι δυνατόν να εξεταστούν όλες. Για την επίλυση αυτών των προβλημάτων χρησιμοποιούνται επιλυτές και βιβλιοθήκες αλγορίθμων που ανήκουν στις ακόλουθες κατηγορίες.

* Επιλυτές προβλημάτων προγραμματισμού με περιορισμούς.
* Επιλυτές προβλημάτων γραμμικού και ακέραιου προγραμματισμού.
* Βιβλιοθήκη επίλυσης προβλημάτων δρομολόγησης οχημάτων. 
* Βιβλιοθήκη αλγορίθμων για επίλυση προβλημάτων σε γραφήματα (π.χ. προβλήματα ροής ελάχιστου κόστους).

## Προβλήματα βελτιστοποίησης

Τα προβλήματα βελτιστοποίησης διαθέτουν τα ακόλουθα στοιχεία:

* Αντικειμενική συνάρτηση (objective). Η ποσότητα που ζητείται να μεγιστοποιηθεί ή να ελαχιστοποιηθεί.
* Περιορισμοί (constraints). Η ικανοποίηση των περιορισμών καθιστά την προτεινόμενη λύση εφικτή.

**Παράδειγμα προβλήματος γραμμικής βελτιστοποίησης στην Python με το OR-Tools**

Σε ένα πρόβλημα γραμμικής βελτιστοποίησης η αντικειμενική συνάρτηση και οι περιορισμοί μπορούν να γραφούν ως γραμμικές εκφράσεις. Για παράδειγμα:

```
maximize    3x+y
subject to  0 <= x <= 1
            0 <= y <= 2
            x + y  <= 2
```

**Βήματα επίλυσης προβλήματος**

* Φόρτωση των απαιτούμενων βιβλιοθηκών
* Δήλωση του επιλυτή
* Δημιουργία μεταβλητών
* Ορισμός των περιορισμών
* Ορισμός της αντικειμενικής συνάρτησης
* Κλήση του επιλυτή και εμφάνιση των αποτελεσμάτων


[linear_programming.ipynb](./linear_programming.ipynb)


**Κατηγορίες προβλημάτων βελτιστοποίησης που αντιμετωπίζονται από το OR-Tools**

* [Γραμμικής βελτιστοποίησης](https://developers.google.com/optimization/lp/lp)
* [Βελτιστοποίησης με περιορισμούς](https://developers.google.com/optimization/cp)
* [Βελτιστοποίησης μεικτού ακέραιου προγραμματισμού](https://developers.google.com/optimization/mip/mip)
* [Πακετοποίησης](https://developers.google.com/optimization/bin/bin)
* [Ροής δικτύων](https://developers.google.com/optimization/flow)
* [Ανάθεσης](https://developers.google.com/optimization/assignment/overview)
* [Χρονοπρογραμματισμού](https://developers.google.com/optimization/scheduling)
* [Δρομολόγησης](https://developers.google.com/optimization/routing)


## Βελτιστοποίηση με περιορισμούς

Η βελτιστοποίηση με περιορισμούς ή προγραμματισμός με περιορισμούς (CP=Constraint Programming) είναι μια τεχνική εντοπισμού εφικτών λύσεων μέσα σε ένα πολύ μεγάλο σύνολο υποψήφιων λύσεων όπως αυτές προσδιορίζονται μέσα από ένα σύνολο περιορισμών διαφόρων μορφών (όχι μόνο γραμμικών). To CP έχει ως βάση τον εντοπισμό εφικτών λύσεων αλλά μπορεί να προσαρμοστεί έτσι ώστε να εντοπίζει προοδευτικά και τις βέλτιστες λύσεις.

### Παραδείγματα CP προβλημάτων

**Κρυπταριθμητικό παζλ**


Αντικατάσταση των χαρακτήρων με ψηφία έτσι ώστε να προκύπτει έγκυρο αποτέλεσμα

```
      CP
+     IS
+    FUN
--------
=   TRUE
```

[cryptarithmetic.ipynb](./cryptarithmetic.ipynb)

**Το πρόβλημα των Ν-Βασιλισσών**

Σε μια σκακιέρα διαστάσεων NxN ζητείται η τοποθέτηση N βασιλισσών έτσι ώστε καμία βασίλισσα να μην απειλεί καμία άλλη.

Ο CP επιλυτής συστηματικά δοκιμάζει όλες τις πιθανές αναθέσεις τιμών σε μεταβλητές εφαρμόζοντας την τεχνική [propagation and backtracking (διάδοσης και οπισθοδρόμησης)](https://developers.google.com/optimization/cp/queens#cp_solver).


Ο CP-SAT επιλυτής χρησιμοποιεί περισσότερο προχωρημένες τεχνικές από τον CP-Solver και προτείνεται από το OR-Tools έναντι του CP-Solver για την αποδοτικότερη επίλυση προβλημάτων. Στο πρόβλημα των N-βασιλισσών εφόσον ζητείται ο εντοπισμός μιας μόνο λύσης ο CP-SAT είναι σε θέση να εντοπίσει τη λύση ακόμα και για ταμπλό 50Χ50 σε μερικά milliseconds.

[nqueens.ipynb](./nqueens.ipynb)


## Προβλήματα ανάθεσης

Στα προβλήματα ανάθεσης (assignment problems) υπάρχει ένα σύνολο εργασιών που πρέπει να εκτελεστούν και ένα σύνολο εργατών που μπορούν να ολοκληρώσουν την κάθε εργασία (με διαφορετικό κόστος). Ζητείται η βέλτιστη ανάθεση εργασιών σε εργάτες έτσι ώστε να επιτυγχάνεται το ελάχιστο δυνατό κόστος. Υπάρχουν πολλές παραλλαγές του παραπάνω προβλήματος οι οποίες μπορούν γενικά να αντιμετωπιστούν με επιλυτές μεικτού ακέραιου προγραμματισμού, με επιλυτές προγραμματισμού με περιορισμούς καθώς και με άλλα είδη επιλυτών. 

Για απλές μορφές προβλημάτων ανάθεσης μπορεί να χρησιμοποιηθεί ο ταχύτατος επιλυτής [Linear Assignment Solver](https://developers.google.com/optimization/assignment/linear_assignment) του OR-Tools.

[linear_assignment_solver.ipynb](./linear_assignment_solver.ipynb)

## Προβλήματα χρονοπρογραμματισμού

Τα προβλήματα χρονοπρογραμματισμού προσωπικού είναι πολύ συνηθισμένα στην πράξη και ζητούν την ανάθεση εργαζόμενων σε βάρδιες έτσι ώστε να καλύπτονται οι ανάγκες ενώ παράλληλα τηρούνται οι ισχύοντες κανονισμοί εργασίας όπως για παράδειγμα ότι ένας εργαζόμενος δεν μπορεί να εργάζεται σε δύο συνεχόμενες βάρδιες.

**Ένα παράδειγμα χρονοπρογραμματισμού νοσηλευτικού προσωπικού**

Έστω 4 νοσηλευτές που πρέπει να καλύψουν τις βάρδιες 3 ημερών σύμφωνα με τους ακόλουθους περιορισμούς:
* Κάθε ημέρα χωρίζεται σε 3 οκτάωρες βάρδιες
* Κάθε ημέρα κάθε βάρδια ανατίθεται σε έναν νοσηλευτή και δεν επιτρέπεται σε κανένα νοσηλευτή να εργάζεται περισσότερες από μια βάρδιες την ημέρα.
* Σε κάθε νοσηλευτή θα πρέπει να ανατεθούν τουλάχιστον δύο βάρδιες κατά τη διάρκεια των 3 ημερών.

[employee_scheduling.ipynb](./employee_scheduling.ipynb)

---

Τα παραπάνω παραδείγματα έχουν ληφθεί από τη σελίδα του [Google ORTools](https://developers.google.com/optimization).